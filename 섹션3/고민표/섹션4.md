## 1. EC2란

 EC2는 AWS에서 제공하는 클라우드 기반 가상 서버로, 사용자가 필요한 컴퓨팅 리소스를 클라우드에서 손쉽게 확장하거나 축소할 수 있는 IaaS(Infrastructure as a Service) 모델입니다. 

 AWS가 네트워크, 하드디스크, 메모리, 가상화 기술 등을 관리하며, 사용자는 운영체제, 미들웨어, 런타임, 데이터를 직접 설정하고 관리합니다.



## 2. EC2 구성요소

1. 이름 및 태그: 인스턴스를 식별, 그룹화
2. OS 이미지: 운영체제
3. 인스턴스 유형: CPU, 메모리 등 컴퓨터 성능 관련
4. 키페어: SSH 접속 시 키관련
5. 네트워크: VPC, subnet, 방화벽 관련
6. 스토리지: 하드디스크 종류, 용량 설정
7. 고급 세부정보: 추가 기능



## 3. EC2 접속 방법

1. 리눅스 기반

   SSH로 접속 => 비공개 키로 접속 포트 22

2. 윈도우

   - RDP 방식으로 접속 => 아이디, 패스워드로 접속 포트: 3389



## 4. EC2 구매옵션

1. **온디맨드 인스턴스**: 약정 없이 초당 비용을 지불합니다.
   - *사용사례*:  트래픽예측 불가능 워크로드와 중단이 허용되지 않는 애플리케이션
2. **예약 인스턴스**: 1년 또는 3년 약정을 통해 최대 72% 저렴하게 이용할 수 있으며, 예측 가능한 장기 워크로드에 적합합니다.
   - *사용사례*: 꾸준한 트래픽을 가진 웹 애플리케이션 운영.
3. **세이빙 플랜**: 일정 사용량에 대해 시간당 요금으로 지불하며, 유연한 방식으로 비용 절감이 가능합니다.
   - *사용사례*: 일정 수준의 컴퓨팅 리소스를 지속적으로 사용하는 애플리케이션.
4. **스팟 인스턴스**: 예비 용량을 최대 90% 저렴하게 이용하지만, 언제든지 종료될 수 있으며, 중단 가능성이 있는 유연한 워크로드에 적합합니다.
   - *사용사례*: 비저장성 빅데이터 분석 작업이나 CI/CD 파이프라인.
5. **전용 호스트/전용 인스턴스**: 단독 물리적 서버를 할당받아 사용하며, 규제 요구 사항이나 라이선스 조건에 따라 전용 리소스가 필요한 경우 적합합니다.
   - *사용사례*: 민감한 데이터 처리나 특정 라이선스 조건이 있는 애플리케이션.
6. **온디맨드 용량 예약**: 특정 기간 동안 특정 가용 영역의 용량을 예약하여 사용하며, 재해복구나 이벤트 대응에 적합합니다.
   - *사용사례*: 대규모 이벤트나 서비스 중단 시 긴급 복구 대비.





## 5. 인스턴스 유형

 AWS EC2 인스턴스는 사용 목적에 따라 성능을 설정할 수 있으며, 범용, 컴퓨팅 최적화, 메모리 최적화 등의 옵션이 있습니다. 인스턴스 이름은 특정 성능과 기능을 반영합니다:



### c5n.xlarge

**인스턴스 패밀리 (예: c)**: 인스턴스의 주요 목적을 나타내며, 예를 들어 `c`는 컴퓨팅 최적화를 의미합니다.

**세대 (예: 5)**: 인스턴스의 기술 세대를 나타내며, 숫자가 높을수록 최신 세대입니다.

**인스턴스 속성 (예: n)**: 특정 기능을 강조하며, 예를 들어 `n`은 네트워크 최적화를 의미합니다.

**인스턴스 사이즈 (예: xlarge)**: CPU 성능과 메모리 크기를 나타내며, 작은 사이즈에서 큰 사이즈로 확장됩니다.



## 6. ENI(가상 네트워크 인터페이스)

 ENI(Elastic Network Interface)는 EC2 인스턴스에 할당되는 가상 네트워크 인터페이스로, 퍼블릭 및 프라이빗 IP를 부여할 수 있습니다. 

 EC2 인스턴스에 여러 개의 ENI를 설정할 수 있으며, 각 ENI는 EC2와 같은 가용 영역에 있어야만 사용이 가능합니다.



## 7. 보안그룹

 보안그룹(Security Group)은 EC2 인스턴스의 인바운드(외부에서 EC2로 들어오는)와 아웃바운드(EC2에서 외부로 나가는) 트래픽을 제어하는 가상 방화벽으로, ENI와 연결됩니다. 

 보안그룹은 **허용 규칙만 설정**하며, 규칙에 없는 트래픽은 모두 거부됩니다. 또한, **상태저장 방화벽**으로, 허용된 인바운드 트래픽은 자동으로 아웃바운드도 허용됩니다. 이는 **상태비저장**인 네트워크 ACL(Access Control List)과 반대입니다.

 트래픽 제어 규칙은 프로토콜, 트래픽 유형, 포트, 개별 IP 주소, CIDR, 프리픽스 리스트, 또는 다른 보안그룹을 대상으로 설정할 수 있습니다. 보안그룹은 EC2 인스턴스 앞에서 트래픽을 통제하여, 들어올 때와 나갈 때의 트래픽 흐름을 관리합니다.



## 8. Elastic IP

 EC2 인스턴스가 생성될 때 자동으로 할당받는 퍼블릭 IP는 인스턴스를 재시작하면 새 IP로 변경됩니다. 이를 방지하고 고정된 퍼블릭 IP를 제공하기 위해 **Elastic IP**를 사용합니다. Elastic IP는 특정 ENI에 할당되어 고정된 퍼블릭 IP로 사용할 수 있으며, 생성된 리전 내에서만 사용 가능합니다.

Elastic IP는 EC2 인스턴스에 연결되어 있을 때는 과금되지 않지만, 인스턴스에 연결되지 않은 상태에서는 과금이 발생합니다.



## 9. AMI

 EC2 인스턴스를 시작하는 데 필요한 소프트웨어 구성(운영체제, 애플리케이션, 라이브러리 등)이 포함된 템플릿을 **Amazon Machine Image (AMI)**라고 합니다. AMI는 특정 인스턴스를 생성할 때 필요한 모든 정보를 담고 있어, 동일한 구성을 가진 여러 인스턴스를 빠르고 쉽게 배포할 수 있게 해줍니다.

AMI는 운영체제(예: 리눅스, 윈도우), 설치된 애플리케이션, 설정된 시스템 환경, 그리고 데이터 저장소(루트 볼륨)까지 포함할 수 있습니다. 이를 통해, 특정 요구사항에 맞는 표준화된 환경을 반복적으로 생성하거나, 다른 AWS 계정 또는 리전으로 복제할 수 있습니다.

AMI는 크게 세 가지 유형으로 제공됩니다:

1. **AWS 제공 AMI**: AWS에서 제공하는 기본 운영체제 이미지.
2. **Marketplace AMI**: AWS Marketplace에서 제공하는 다양한 소프트웨어가 설치된 이미지.
3. **사용자 정의 AMI**: 사용자가 특정 설정과 애플리케이션을 포함하여 직접 생성한 이미지.



## 10. 배치 그룹

 **배치 그룹**은 EC2 인스턴스의 배치 전략을 통해 인스턴스 간의 성능, 가용성, 장애 내성을 최적화하는 방법입니다. 다음은 배치 그룹의 주요 유형과 설명입니다:

1. **클러스터 배치 그룹**:
   - **설명**: 단일 가용 영역 내에서 인스턴스들을 고속 네트워크로 연결하여 배치합니다.
   - **장점**: 높은 네트워크 성능을 제공하며, 데이터 전송 지연 시간을 최소화합니다.
   - **사용사례**: 고성능 컴퓨팅(HPC), 대규모 데이터 분석, 네트워크 집약적인 애플리케이션.
2. **파티션 배치 그룹**:
   - **설명**: 인스턴스 그룹을 서로 하드웨어를 공유하지 않는 파티션으로 분할하여 배치합니다. 각 파티션은 독립적인 하드웨어 자원에 할당되어 장애가 다른 파티션에 영향을 미치지 않습니다.
   - **장점**: 고가용성과 데이터 안정성을 제공하며, 특정 파티션의 장애가 전체 시스템에 영향을 미치지 않도록 합니다.
   - **사용사례**: HDFS, HBase, Cassandra 등 빅데이터 분산 처리 시스템에서 노드 간 데이터 분산 및 장애 내성을 보장하는 데 사용됩니다.
3. **분산형 배치 그룹**:
   - **설명**: 그룹 내의 각 개별 인스턴스가 서로 다른 하드웨어에 배치됩니다. 인스턴스는 물리적으로 서로 다른 하드웨어를 사용하여 배치됩니다.
   - **장점**: 하드웨어 고장이나 장애로부터 높은 내성을 제공하며, 고가용성이 필요한 애플리케이션에 적합합니다.
   - **사용사례**: 매우 중요하고 고가용성이 요구되는 애플리케이션에서 사용되어, 인스턴스 간의 물리적 하드웨어 분리를 통해 높은 안정성을 보장합니다.





## 11. EC2 라이프사이클

EC2 인스턴스는 시작부터 종료까지 다양한 상태와 행동을 갖습니다. 이를 통해 인스턴스를 관리하고 요금을 최적화할 수 있습니다.

### **행동**

1. **시작(Start)**:
   - **설명**: 인스턴스의 전원을 켜는 동작입니다. 인스턴스가 실행 상태로 전환됩니다.
2. **재부팅(Reboot)**:
   - **설명**: 인스턴스의 전원을 다시 켜는 동작입니다. 운영체제와 애플리케이션을 다시 시작하지만, 인스턴스 ID와 관련된 상태는 유지됩니다.
3. **중지(Stop)**:
   - **설명**: 인스턴스의 전원을 끄는 동작입니다. 인스턴스는 종료 상태로 전환되지만, 인스턴스의 상태와 EBS 볼륨은 유지됩니다.
4. **최대 절전(Suspend)**:
   - **설명**: 인스턴스의 RAM에 있는 데이터를 루트 볼륨에 저장하고, 인스턴스를 절전 모드로 전환합니다. 재시작 시 저장된 상태에서 복원됩니다.
5. **종료(Terminate)**:
   - **설명**: 인스턴스를 완전히 종료하는 동작입니다. 종료된 인스턴스는 더 이상 복구할 수 없으며, 모든 데이터와 상태가 삭제됩니다.

### **상태**

1. **실행 중(Running)**:
   - **설명**: 인스턴스가 현재 실행되고 있으며, 사용 가능한 상태입니다.
2. **중지됨(Stoppеd)**:
   - **설명**: 인스턴스의 전원이 꺼져 있지만, EBS 볼륨과 설정은 유지됩니다. 이 상태에서 시간당 사용 요금은 부과되지 않으며, EBS 스토리지 비용은 여전히 발생합니다.
3. **종료됨(Terminated)**:
   - **설명**: 인스턴스가 완전히 종료되었으며, 복구할 수 없는 상태입니다. 이 상태에서 시간당 사용 요금은 부과되지 않으며, EBS 스토리지 비용도 부과되지 않습니다(단, EBS 볼륨이 삭제되지 않은 경우는 제외).


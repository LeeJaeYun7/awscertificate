## 1.IAM 서비스의 목적

=> AWS 계정 및 서비스의 권한을 관리하기 위한 것



## 2.  IAM의 구성요소

- 정책(Policy): 리소스에 대한 특정 권한을 정의하는 JSON문서로, 사용자, 그룹, 역할에 부여하여 AWS서비스에 대한 접근을 제어

- 사용자(User): AWS리소스에 접근할 수 있는 개별 서비스 계정 

- 그룹(Group): 여러 사용자를 하나의 단위로 묶어서 공통된 정책을 쉽게 부여하고 관리

- 역할(Role): 리소스에 대한 권한을 임시로 부여할 수 있는 기능. 사용자, 애플리케이션 또는 다른 AWS리소스가 특정 작업을 할 때 권한을 위임.

  

## 3. 정책(Policy) JSON 형식



```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow", #Allow 혹은 Deny, 정책의 허용 혹은 거부를 나타냄
            "Action": [  
                "s3:GetObject",
                "ec2:*",
             
            ],
            "Resource": "*"
        }
    ]
}


```

1. **Version**

​    \- 정책의 버전을 나타냅니다. 대부분의 경우 "2012-10-17" 버전을 사용합니다.

2. **Statement**:

​    \- 하나 이상의 권한 부여 또는 거부 명령을 포함하는 문(statement)의 배열입니다.

3. **Effect**:

​    \- 정책의 허용(Allow) 또는 거부(Deny)를 나타냅니다.

4. **Action**:

​    \- 정책이 적용되는 작업을 정의합니다. 작업은 `"서비스:작업"` 형식으로 지정되며, 여기서 `"*"`은 모든 작업을 의미합니다.

​    \- **예시**:

​      \- `"s3:GetObject"`: S3 버킷에서 객체를 가져오는 작업을 허용합니다.

​      \- `"ec2:*"`: 모든 EC2 관련 작업을 허용합니다.

5. **Resource**:

​    \- 정책이 적용될 AWS 리소스를 정의합니다. 이 예제에서는 `"*"`을 사용하여 모든 리소스에 대해 정책을 적용합니다.



## 4. 관리형 정책/ 인라인 정책

#### 관리형 정책 (Managed Policy)

\- **중앙 집중식**: 다수의 사용자, 그룹 및 역할에 연결할 수 있는 정책으로, 중앙에서 관리하고 재사용할 수 있습니다.

\- **설명**: 관리형 정책은 여러 IAM 엔티티에 적용될 수 있는 정책입니다. AWS에서는 관리형 정책을 중앙에서 관리, 업데이트할 수 있어 일관된 권한 관리를 도울 수 있습니다.



#### 인라인 정책 (Inline Policy)

\- **개별 부여**: 특정 사용자, 그룹 또는 역할에 직접 추가하여 해당 엔티티에게만 특정 권한을 부여하는 정책입니다.

\- **설명**: 인라인 정책은 특정 IAM 엔티티와 밀접하게 연결되어 있으며, 그 엔티티에만 적용됩니다. 이 정책은 개별적으로 관리되고, 엔티티가 삭제되면 해당 인라인 정책도 함께 삭제됩니다.





## 5. 권한경계

\- **최대 권한 제한**: 전체 권한에 대한 제한을 설정하여 특정 권한으로 축소할 수 있으며, 권한 경계 내에서만 권한이 작동합니다.



````json
#### 사용자에 대한 일반 권한 정책:
- 사용자는 다음과 같은 모든 S3 버킷에 접근할 수 있는 권한을 가진다.
```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "s3:*",
            "Resource": "*"
        }
    ]
}
```

#### 권한 경계:
- 권한 경계는 특정 S3 버킷(`example-bucket`)에만 접근을 허용함.
```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "s3:*",
            "Resource": "arn:aws:s3:::example-bucket/*"
        }
    ]
}
````



## 6. 역할(Role) 추가 설명



1. **정의**: IAM 역할은 AWS 서비스나 사용자에게 일시적으로 권한을 부여하는 데 사용하는 IAM 오브젝트
2. **용도**:
   1. 주로 EC2 인스턴스, Lambda 함수, ECS 작업 등과 같은 **AWS 서비스에 권한**을 부여하기 위해 사용. 예를 들어, EC2 인스턴스가 S3 버킷에 접근해야 할 때 IAM 역할을 부여할 수 있습니다
   2. 역할은 **임시 보안 자격 증명**을 사용하여 인증을 수행, 필요한 기간 동안 권한을 부여할 수 있습니다.





